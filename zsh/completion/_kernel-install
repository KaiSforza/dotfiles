#compdef kernel-install

_kernel-install_command() {
    local -a _kernel_install_cmds
    _kernel_install_cmds=(
        'add:install kernel'
        'remove:remove kernel'
    )
    if (( CURRENT == 1 )); then
        _describe -t commands 'kernel-install command' _kernel_install_cmds
    else
        local curcontext="$curcontext"
        local _skip=('extramodules*')
        case $CURRENT in
            2)
                _alternative : \
                    'kernel:installed kernels:_path_files -/ -W /lib/modules -F _skip'
                ;;
            3)
                _alternative : \
                    'image:kernel images:_path_files -W /boot/ -g "*.img"'
        esac
    fi
}

_arguments \
    '*::kernel-install command:_kernel-install_command'

#vim: set ft=zsh sw=4 ts=4 et
