mkdir -p "/tmp/manpages/$UID"
_a="$(mktemp -d -p "/tmp/manpages/$UID" tmp-XXXXXX)"

unset _page

if [[ -n "$(grep '^[0-9n]$' <<< $1)" ]]; then
  _page=$1
  shift
fi

_mans=()

for i in $@; do
  _manual="$(man -w $_page $i)"
  _manual="${_manual%%.gz}"
  MANWIDTH=77 man --pager=cat $_page $i > "$_a"/"${_manual##*/}" 2> /dev/null && _mans=(${_mans[@]} "$_a"/"${_manual##*/}")
done

if [[ -n "${_mans[@]}" ]]; then
  vim -n -f -M ${_mans[@]}
fi

rm -rf "$_a"

# vim: set ft=zsh:
